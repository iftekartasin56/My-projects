


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <title>Payment Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #F9FAFF;
        }
    </style>
</head>
<body>

<!-----------Please copy and paste following code into any HTML element ---------------->

<!----------- copy starts ---------------->
<style>
#hm2_cl *, ::after, ::before {
    box-sizing: border-box;
}
#hm2_cl {
    line-height: 1.5;
    font-family: 'Roboto', sans-serif;
}
#hm2_cl .container {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #080337;
    text-align: left;
}
#hm2_cl label {
    display: inline-block;
    margin-bottom: .5rem;
    font-size: 14px;
    font-weight: 500;
}
#hm2_cl .table {
    width: 100%;
    max-width: 100%;
    margin-bottom: 0rem;
    background-color: transparent;
    border-collapse: collapse;
}
#hm2_cl .table td, #hm2_cl .table th {
    padding: .65rem .75rem;
    vertical-align: middle;
    border-right: none !important;
    border-left: none !important;
    border-top: none !important;
    border-bottom: 1px solid #cecabe;
    font-size: 16px;
    background: transparent;
    box-shadow: none;
    color:#000000;
}
#hm2_cl .table th {
    text-align: left;
    font-weight: 500;
}
#hm2_cl h3, h4, p {
    margin: 10px 0;
}
#hm2_cl .row {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
}
#hm2_cl .col-md-1, #hm2_cl .col-md-10, #hm2_cl .col-md-11, #hm2_cl .col-md-12, #hm2_cl .col-md-2, #hm2_cl .col-md-3, #hm2_cl .col-md-4, #hm2_cl .col-md-5, #hm2_cl .col-md-6, #hm2_cl .col-md-7, #hm2_cl .col-md-8, #hm2_cl .col-md-9 {
    position: relative;
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
}
#hm2_cl .form-group {
    margin-bottom: 1rem;
}
#hm2_cl .form-control {
    display: block;
    width: 100%;
    height: calc(1.5em + .75rem + 3px);
    padding: .375rem .75rem;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
    color: #080337;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
#hm2_cl .form-control:focus {
    outline: none;
}
#hm2_cl .input-group {
    position: relative;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -ms-flex-align: stretch;
    align-items: stretch;
    width: 100%;
    margin-bottom: 1rem;
}
#hm2_cl .input-group>.custom-select:not(:last-child), #hm2_cl .input-group>.form-control:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
#hm2_cl .input-group>.custom-file, #hm2_cl .input-group>.custom-select, #hm2_cl .input-group>.form-control, #hm2_cl .input-group>.form-control-plaintext {
    position: relative;
    -ms-flex: 1 1 0%;
    flex: 1 1 0%;
    min-width: 0;
    margin-bottom: 0;
}#hm2_cl .input-group>.custom-select:not(:first-child), #hm2_cl .input-group>.form-control:not(:first-child) {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
#hm2_cl .input-group>.custom-select:not(:last-child), #hm2_cl .input-group>.form-control:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
#hm2_cl .input-group>.custom-file+.custom-file, #hm2_cl .input-group>.custom-file+.custom-select, #hm2_cl .input-group>.custom-file+.form-control, #hm2_cl .input-group>.custom-select+.custom-file, #hm2_cl .input-group>.custom-select+.custom-select, #hm2_cl .input-group>.custom-select+.form-control, #hm2_cl .input-group>.form-control+.custom-file, #hm2_cl .input-group>.form-control+.custom-select, #hm2_cl .input-group>.form-control+.form-control, #hm2_cl .input-group>.form-control-plaintext+.custom-file, #hm2_cl .input-group>.form-control-plaintext+.custom-select, #hm2_cl .input-group>.form-control-plaintext+.form-control {
    margin-left: -1px;
}
#hm2_cl .input-group>.custom-file, #hm2_cl .input-group>.custom-select, #hm2_cl .input-group>.form-control, #hm2_cl .input-group>.form-control-plaintext {
    position: relative;
    -ms-flex: 1 1 0%;
    flex: 1 1 0%;
    min-width: 0;
    margin-bottom: 0;
}
#hm2_cl .custom-control-label::before, #hm2_cl .custom-file-label, #hm2_cl .custom-select {
    transition: background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
#hm2_cl .input-group-append {
    margin-left: -1px;
}
#hm2_cl .input-group-append, #hm2_cl .input-group-prepend {
    display: -ms-flexbox;
    display: flex;
}
#hm2_cl .input-group>.input-group-append:last-child>.btn:not(:last-child):not(.dropdown-toggle), #hm2_cl .input-group>.input-group-append:last-child>.input-group-text:not(:last-child), #hm2_cl .input-group>.input-group-append:not(:last-child)>.btn, #hm2_cl .input-group>.input-group-append:not(:last-child)>.input-group-text, #hm2_cl .input-group>.input-group-prepend>.btn, #hm2_cl .input-group>.input-group-prepend>.input-group-text {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
#hm2_cl .input-group>.input-group-append>.btn, #hm2_cl .input-group>.input-group-append>.input-group-text, #hm2_cl .input-group>.input-group-prepend:first-child>.btn:not(:first-child), #hm2_cl .input-group>.input-group-prepend:first-child>.input-group-text:not(:first-child), #hm2_cl .input-group>.input-group-prepend:not(:first-child)>.btn, #hm2_cl .input-group>.input-group-prepend:not(:first-child)>.input-group-text {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
#hm2_cl .input-group-append .btn, #hm2_cl .input-group-prepend .btn {
    position: relative;
    z-index: 2;
}
#hm2_cl .input-group-text {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-align: center;
    align-items: center;
    padding: 0.355rem 0.75rem;
    margin-bottom: 0;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #080337;
    text-align: center;
    white-space: nowrap;
    background-color: #ffffff;
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
}
#hm2_cl .input-group-append .btn+.btn, #hm2_cl .input-group-append .btn+.input-group-text, #hm2_cl .input-group-append .input-group-text+.btn, #hm2_cl .input-group-append .input-group-text+.input-group-text, #hm2_cl .input-group-prepend .btn+.btn, #hm2_cl .input-group-prepend .btn+.input-group-text, #hm2_cl .input-group-prepend .input-group-text+.btn, #hm2_cl .input-group-prepend .input-group-text+.input-group-text {
    margin-left: -1px;
}
#hm2_cl .input-group-prepend .btn, #hm2_cl .input-group-append .btn {
    position: relative;
    z-index: 2;
}
#hm2_cl .text-center {
    text-align: center!important;
}
/* Custom css */
#hm2_cl .cl-wrapper {
    position: relative;
    border-radius: 10px;
    background: #ffffff;
    box-shadow: 0 10px 30px 1px rgb(0 0 0 / 10%);
}
#hm2_cl .cl-left-div {
    padding: 3rem 3rem 2rem 3rem!important;
    background: #ffffff;
    border-radius: 10px;
}
#hm2_cl .cl-right-div {
    padding: 2rem 3rem !important;
    border-radius: 0 0 8px 8px;
    background: #ffffff;
    color: #080337;
}
#hm2_cl .rs-sec {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-around;
    border-radius: 10px;
    padding: 1rem 0.5rem;
    margin: 6px 0;
    box-shadow: 0 10px 30px 1px rgb(0 0 0 / 10%);
}
#hm2_cl .rs-vl {
    text-align: right;
    font-weight: 500;
}
#hm2_cl .rs-sub-title-sp {
    font-size: 17px;
    margin: 2px;
    border-bottom: 1px solid #6BC14B;
}
#hm2_cl .rs-sp-value {
    font-size: 26px;
    margin: 8px 2px;
    color: #6BC14B;
}
#hm2_cl .sp-rs {
    color: #6BC14B;
}
#hm2_cl .btn {
    display: inline-block;
    font-weight: 400;
    color: #212529;
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: transparent;
    border: 2px solid transparent;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    border-radius: .25rem;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
#hm2_cl .btn-warning {
    color: #fff;
    background-color: #6BC14B;
    border-color: #6BC14B;
    text-decoration: none;
    padding: 0.5rem 3.4375rem;
    font-size: 1.25rem;
    border-radius: 55px;
}
#hm2_cl .btn-warning:hover {
    color: #127635;
    background-color: #ffffff;
    border-color: #6BC14B;
}
/* responsive */
@media (min-width: 576px){
    #hm2_cl .container, #hm2_cl .container-sm {
        max-width: 540px;
    }
}
@media (min-width: 768px){
    #hm2_cl .container, #hm2_cl .container-md, #hm2_cl .container-sm {
        max-width: 100%;
    }
    #hm2_cl .col-md-12 {
        -ms-flex: 0 0 100%;
        flex: 0 0 100%;
        max-width: 100%;
    }
    #hm2_cl .col-md-9 {
        -ms-flex: 0 0 75%;
        flex: 0 0 75%;
        max-width: 75%;
    }
    #hm2_cl .col-md-8 {
        -ms-flex: 0 0 66.666667%;
        flex: 0 0 66.666667%;
        max-width: 66.666667%;
    }
    #hm2_cl .col-md-6 {
        -ms-flex: 0 0 50%;
        flex: 0 0 50%;
        max-width: 50%;
    }
    #hm2_cl .col-md-4 {
        -ms-flex: 0 0 33.333333%;
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
    #hm2_cl .col-md-3 {
        -ms-flex: 0 0 25%;
        flex: 0 0 25%;
        max-width: 25%;
    }
}
@media (min-width: 992px){
    #hm2_cl .container, #hm2_cl .container-lg, #hm2_cl .container-md, #hm2_cl .container-sm {
        max-width: 900px;
    }
}
@media (min-width: 1200px) {
    #hm2_cl .container, #hm2_cl .container-lg, #hm2_cl .container-md, #hm2_cl .container-sm, #hm2_cl .container-xl {
        max-width: 900px;
    }
}
#hm2_cl hr {
    border: none;
    border-bottom: 1px solid #ccc;
}
#hm2_cl .optios-sec {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
}
#hm2_cl .radio-option {
    display: flex;
    flex-direction: row;
    align-items: center;
    background: #ffffff;
    padding: 6px 10px;
    width: 50%;
    border-radius: 5px;
    border: 1px solid #ccc;
    text-align: center;
    cursor: pointer;
    color: #080337;
    transition: all 0.2s;
    font-size: 16px;
    user-select: none;
}
#hm2_cl .radio-option:hover {
    background: #dddddd;
    border: 1px solid #dddddd;
}
#hm2_cl .radio-option.active {
    background: #34D9E5;
    border: 1px solid #34D9E5;
    color:#ffffff;
}
#hm2_cl .circle-radio {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #ffffff;
    border: 1px solid #b5b5b5;
    margin-right: 6px;
}
#hm2_cl .mr-right {
    margin-right: 5px;
}
#hm2_cl .ds-none {
    display: none;
}
#hm2_cl .rs-sec-title {
    font-size: 22px;
    text-align: center;
    border-bottom: 1px solid #ccc;
    padding-bottom: 8px;
    color: #26459E;
}
#hm2_cl .grow-logo {
    width: 70px;
    display: inline-block;
}
#hm2_cl .text-center {
    text-align: center;
}
#hm2_cl .top-title {
    font-size: 26px;
    text-align: center;
    margin: 10px 0 30px 0;
    color: #6bc14b;
}
#hm2_cl .top-logo {
    width: 200px;
    margin-top: -32px;
}
#hm2_cl .form-control-two {
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 3px);
    padding-left: 5px;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
    color: #4a4a4a;
    background-color: #fff;
    background-clip: padding-box;
    border: none;
    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
}
#hm2_cl .inner_form {
    border-top-left-radius: 0px;
    border-bottom-left-radius: 0px;
    border-left: none;
    border-right: none;
    outline: none;
}

#hm2_cl .sp-left {
    padding-right: 22px;
}
#hm2_cl .flex_ele {
    display: flex;
    width: 100%;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.7;
    color: #4a4a4a;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #dddddd;
    border-radius: 0.25rem;
    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    align-items: center;
}
#hm2_cl .down-payment-first {
    padding: 6px 10px;
    border-right: 1px solid #D9D9D9;
    cursor: pointer;
    width: 35px;
    text-align: center;
}
#hm2_cl .down-payment-last {
    padding: 6px 10px;
    border-right: 1px solid #D9D9D9;
    cursor: pointer;
    width: 35px;
    text-align: center;
}
#hm2_cl .is-active {
    background-color: #6bc14b;
    color: #fff;
}
#hm2_cl .morgage-para {
    margin-top: 15px;
    font-size: 14px;
    text-align: center;
}
#hm2_cl .upper-rs {
    margin-bottom: 20px;
}
@media (max-width: 768px){
    #hm2_cl .cl-left-div {
        padding: 1rem 2rem !important;
    }
    #hm2_cl .cl-right-div {
        padding: 2rem 1rem !important;
        border-radius: 0 0 8px 8px;
    }
    #hm2_cl label {
        font-size: 14px;
    }
    #hm2_cl .rs-sec {
        flex-direction: column;
    }
    #hm2_cl .btn-warning {
        padding: 1.1375rem 2rem;
        font-size: 1rem;
    }
    #hm2_cl .upper-rs {
        margin-bottom: 5px;
    }
    #hm2_cl .top-logo {
        width: 200px;
        margin-top: -2px;
    }
}
</style>
<div id="hm2_cl">
    <div class="container cl-wrapper">
        <div class="row">
            <div class="col-md-12 cl-left-div">
                <p class="text-center">
                    <img class="top-logo" src="https://growmtg.com/wp-content/uploads/2021/09/artworkMr_vector-01_20.png" alt="" srcset="">
                </p>
                <h1 class="top-title">Payment Calculator</h1>
                <div class="row">
                    <div class="col-md-6">
                        <label for="hm2_in_1">Loan Type</label>
                        <div class="input-group">
                            <select class="form-control hm2_cl-input" id="hm2_in_1">
                                <option value="">--select--</option>
                                <option value="Conventional">Conventional</option>
                                <option value="FHA">FHA</option>
                                <option value="VA">VA</option>
                            </select>
                        </div>                     
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_2">Purchase Price</label>    
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" class="form-control hm2_cl-input hm2_in-curr" id="hm2_in_2">
                        </div>             
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_1">Term of Mortgage</label>
                        <div class="input-group">
                            <select name="" id="hm2_in_3" class="form-control hm2_cl-input">
                                <option value="">--select--</option>
                                <option value="30" selected>30</option>
                                <option value="29">29</option>
                                <option value="28">28</option>
                                <option value="27">27</option>
                                <option value="26">26</option>
                                <option value="25">25</option>
                                <option value="24">24</option>
                                <option value="23">23</option>
                                <option value="22">22</option>
                                <option value="21">21</option>
                                <option value="20">20</option>
                                <option value="19">19</option>
                                <option value="18">18</option>
                                <option value="17">17</option>
                                <option value="16">16</option>
                                <option value="15">15</option>
                                <option value="14">14</option>
                                <option value="13">13</option>
                                <option value="12">12</option>
                                <option value="11">11</option>
                                <option value="10">10</option>
                                <option value="9">9</option>
                                <option value="8">8</option>
                                <option value="7">7</option>
                                <option value="6">6</option>
                                <option value="5">5</option>
                                <option value="4">4</option>
                                <option value="3">3</option>
                                <option value="2">2</option>
                                <option value="1">1</option>
                            </select>
                        </div>                     
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_4">Down Payment</label>
                        <div class="input-group">
                            <div class="flex_ele option-elm">
                                <span class="down-payment-first downpayment-type is-active" data-value="dollar">$</span>
                                <span class="down-payment-last downpayment-type" data-value="prcnt">%</span>
                                <input type="text" class="form-control-two sp-left hm2_cl-input inner_form" id="hm2_in_4" autocomplete="off">
                            </div>
                        </div>  
                        <p style="color:red; display: none;" id="err_msg_down">3% Down Minimum for this Loan Type</p>
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_5">Rate</label>    
                        <div class="input-group">
                            <input type="text" class="form-control hm2_cl-input hm2_in-pr" id="hm2_in_5" >
                            <div class="input-group-append">
                                <span class="input-group-text">%</span>
                            </div>
                        </div>             
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_6">Yearly Insurance</label>    
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" class="form-control hm2_cl-input hm2_in-curr" id="hm2_in_6">
                        </div>             
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_7">Yearly Property Taxes</label>    
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="text" class="form-control hm2_cl-input hm2_in-curr" id="hm2_in_7">
                        </div>             
                    </div>
                    <div class="col-md-6">
                        <label for="hm2_in_8">Loan Amount</label>    
                        <div class="input-group">
                            <input type="text" class="form-control" id="hm2_in_8" readonly>
                        </div>             
                    </div>
                    <div class="col-md-6 funding_fee_sec">
                        <label for="hm2_in_9">Funding Fee</label>    
                        <div class="input-group">
                            <input type="text" class="form-control" id="hm2_in_9" readonly>
                        </div>             
                    </div>
                </div> 
                <br>
                <div class="row">
                    <div class="col-md-6">
                        <div class="rs-sec upper-rs">
                            <div class="rs-sp-vl-sec text-center">
                                <h4 class="rs-sub-title-sp" style="color: #26459E;">Estimated PMI</h4>
                                <h2 class="rs-sp-value" id="hm2_rs_1">-</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="rs-sec upper-rs">
                            <div class="rs-sp-vl-sec text-center">
                                <h4 class="rs-sub-title-sp" style="color: #26459E;">Principle & Interest:</h4>
                                <h2 class="rs-sp-value" id="hm2_rs_3">-</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="rs-sec">
                            <div class="rs-sp-vl-sec text-center">
                                <h4 class="rs-sub-title-sp" style="color: #26459E;">Estimated Monthly Payment:</h4>
                                <h2 class="rs-sp-value" id="hm2_rs_2">-</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="rs-sec">
                            <div class="rs-sp-vl-sec text-center">
                                <h4 class="rs-sub-title-sp" style="color: #26459E;">Estimated Out of Pocket</h4>
                                <h2 class="rs-sp-value" id="hm2_rs_4">-</h2>
                            </div>
                        </div>
                    </div>
                    <div class="morgage-para">Mortgage payments may vary. This is not a commitment to lend. Please get a formal loan estimate to compare figures. NMLS#2322797</div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/autonumeric@4.5.4"></script>
<script>
jQuery(function($){
    let downpayment_type = "dollar";
    let downpayment_ok = false;
    
    let downpayment_amount = 0;
    let downpayment_prcnt = 0;
    let funding_fee = 0;
    let loan_ammount = 0;
    let estimated_pmi = 0;

    const hm2_nft = Intl.NumberFormat("en-US", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
    });
    const hm2_nftd = Intl.NumberFormat("en-US", {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
    });

    const hm2_numOptionCurrency = {
        digitGroupSeparator        : ',',
        decimalCharacter           : '.',
        decimalCharacterAlternative: '.',
        currencySymbol             : '',
        currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.prefix,
        modifyValueOnWheel         : false,
        decimalPlaces              : 0,
        minimumValue               : 0,
        maximumValue	           : 999999999999999999
    };
    const hm2_numOptionPercent = {
        digitGroupSeparator        : ',',
        decimalCharacter           : '.',
        decimalCharacterAlternative: '.',
        currencySymbol             : '',
        currencySymbolPlacement    : AutoNumeric.options.currencySymbolPlacement.suffix,
        modifyValueOnWheel         : false,
        decimalPlaces              : 2,
        minimumValue	           : 0,
        maximumValue	           : 100
    };
    const anElement1 = AutoNumeric.multiple('.hm2_in-curr', hm2_numOptionCurrency);
	new AutoNumeric('#hm2_in_5', hm2_numOptionPercent);

    const elm1 = new AutoNumeric('#hm2_in_4', hm2_numOptionCurrency);

    $(".downpayment-type").on("click", function(){
        $(".downpayment-type").removeClass("is-active");
        $(this).addClass("is-active");

        elm1.set("");

        downpayment_type = $(this).data("value");

        if(downpayment_type == "dollar"){
            elm1.update(hm2_numOptionCurrency);
        } else {
            elm1.update(hm2_numOptionPercent);
        }

        hm2_calc_loan();
        hm2_calc();

    });

    $("#hm2_in_1").on("input", function(){
        hm2_calc_loan();

        hm2_calc();
    });

    $("#hm2_in_2, #hm2_in_4").on("input", function(){
        hm2_calc_loan();

        hm2_calc();
    });

    function hm2_calc_loan(){
        hm2_in_1 = $("#hm2_in_1").val();
        hm2_in_2 = hm2_removeSign($("#hm2_in_2").val());
        hm2_in_4 = hm2_removeSign($("#hm2_in_4").val());        

        if(downpayment_type == "dollar"){
            downpayment_amount = hm2_in_4;
            downpayment_prcnt = (hm2_in_4/hm2_in_2) * 100;
        } else {
            downpayment_amount = (hm2_in_2 * (hm2_in_4 / 100));
            downpayment_prcnt = hm2_in_4;
        }

        if(hm2_in_1 == "Conventional"){
            $(".funding_fee_sec").hide();
            loan_ammount = hm2_in_2 - downpayment_amount;
            estimated_pmi = 0.0038 * loan_ammount / 12;
        } else if(hm2_in_1 == "FHA"){
            $(".funding_fee_sec").show();

            funding_fee = (hm2_in_2 - 0) * 0.0175;
            loan_ammount =  (hm2_in_2 - downpayment_amount) + funding_fee;
            estimated_pmi = 0.0055 * loan_ammount / 12;

        } else if(hm2_in_1 == "VA"){
            $(".funding_fee_sec").show();

            if(downpayment_prcnt >= 0 && downpayment_prcnt <= 4.99){
                funding_fee = (hm2_in_2 - 0) * (2.15/100);
            } else if(downpayment_prcnt >= 5 && downpayment_prcnt <= 9.99){
                funding_fee = (hm2_in_2 - 0) * (1.5/100);
            } else if(downpayment_prcnt >= 10){
                funding_fee = (hm2_in_2 - 0) * (1.25/100);
            }

            loan_ammount = (hm2_in_2 - downpayment_amount) + funding_fee;
            estimated_pmi = 0;
        }

        let loan_amount = hm2_in_2;
        let loan_prcnt = 0;

        if(hm2_in_1 == "VA"){
            $("#err_msg_down").hide();
            downpayment_ok = true;
        } else {
            if(isFinite(downpayment_prcnt)){
                if(downpayment_prcnt < 3){
                    $("#err_msg_down").show();
                    downpayment_ok = false;
                } else {
                    $("#err_msg_down").hide();
                    downpayment_ok = true;
                }
            } else {
                $("#err_msg_down").show();
                downpayment_ok = false;
            }
        }

        $("#hm2_in_8").val("$" + hm2_nftd.format(loan_ammount));
    }

    $(".hm2_cl-input").on("input", function(){
        hm2_calc();
    });

    function hm2_calc(){
        hm2_in_1 =  $("#hm2_in_1").val();
        hm2_in_2 =  hm2_removeSign($("#hm2_in_2").val());
        hm2_in_3 =  Number($("#hm2_in_3").val());
        hm2_in_4 =  hm2_removeSign($("#hm2_in_4").val());
        hm2_in_5 =  hm2_removeSign($("#hm2_in_5").val())/100;
        hm2_in_6 =  hm2_removeSign($("#hm2_in_6").val());
        hm2_in_7 =  hm2_removeSign($("#hm2_in_7").val());


        if(hm2_in_1 && hm2_in_2 && hm2_in_3 && downpayment_ok && $("#hm2_in_4").val() && hm2_in_5){
            let principle_interest = PMT(hm2_in_5 / 12, (hm2_in_3 * 12), loan_ammount) * -1;
            let estimated_monthly_payment =  principle_interest + ((hm2_in_6 + hm2_in_7) / 12) + estimated_pmi;
            let estimate_pocket = hm2_in_2 * 0.02 + downpayment_amount;

            $("#hm2_in_9").val("$" + hm2_nftd.format(funding_fee));
            $("#hm2_rs_1").text("$" + hm2_nftd.format(estimated_pmi));
            $("#hm2_rs_2").text("$" + hm2_nftd.format(estimated_monthly_payment));
            $("#hm2_rs_3").text("$" + hm2_nftd.format(principle_interest));
            $("#hm2_rs_4").text("$" + hm2_nftd.format(estimate_pocket));
        } else{
            $("#hm2_in_9").val("-");
            $("#hm2_rs_1").text("-");
            $("#hm2_rs_2").text("-");
            $("#hm2_rs_3").text("-");
            $("#hm2_rs_4").text("-");
        }        
    }

    function hm2_removeSign(vl){
        return Number(vl.replace(/,/g,''));
    }
    function PMT(rate, nperiod, pv, fv, type) {
        if (!fv) fv = 0;
        if (!type) type = 0;

        if (rate == 0) return -(pv + fv)/nperiod;

        var pvif = Math.pow(1 + rate, nperiod);
        var pmt = rate / (pvif - 1) * -(pv * pvif + fv);

        if (type == 1) {
            pmt /= (1 + rate);
        };

        return pmt;
    }

});
</script>
<!----------- copy ends ---------------->
</body>
</html>